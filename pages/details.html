<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>تفاصيل المنتج - Penguin</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #121212;
      color: #f1f1f1;
      font-family: 'Cairo', sans-serif;
      padding: 20px;
    }
    .card {
      background-color: #1e1e1e;
      border: 1px solid #444;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    .card-title, .card-text, p, label {
      color: #f1f1f1;
    }
    .price-original {
      text-decoration: line-through;
      color: #bbb;
      margin-left: 10px;
    }
    .btn.active {
      background-color: #0d6efd !important;
      border-color: #0d6efd !important;
    }
    .successMessage {
      display: none;
      position: absolute;
      bottom: 60px;
      right: 10px;
      background: rgba(10,20,40,0.7);
      color: #fff;
      padding: 6px 12px;
      border-radius: 12px;
      backdrop-filter: blur(8px);
      font-size:12px;
      border:1px solid rgba(255,255,255,0.2);
      opacity:0;
      transform:translateY(10px);
      transition:opacity .4s,transform .4s;
      z-index:5;
    }
    .successMessage.show {
      display:block;
      opacity:1;
      transform:translateY(0);
    }
    .carousel-item img {
      height:300px;
      object-fit:cover;
    }
    .thumbnails {
      display:flex;
      justify-content:center;
      margin-top:10px;
    }
    .thumbnails img {
      width:60px;
      height:60px;
      object-fit:cover;
      margin:0 5px;
      border:2px solid transparent;
      cursor:pointer;
      border-radius:5px;
    }
    .thumbnails img.active {
      border-color:#0d6efd;
    }
  </style>
</head>
<body>
  <div class="container my-5">
    <div id="productDetails" class="row justify-content-center"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const products = {
      Dubai: {
        title: "سكراپ Dubai",
        description: "خامة إيطالية فاخرة ومناسبة لساعات العمل الطويلة.",
        images: [
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%20.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%201.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%202.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%20side%20.jpg?raw=true"
        ]
      },
      Aqua: {
        title: "سكراپ Aqua man",
        description: "لون مميز وقماش مقاوم للبهتان.",
        images: [
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%20.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%201.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%20front.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%20side.jpg?raw=true"
        ]
      },
      Midnight: {
        title: "سكراپ Midnight",
        description: "تصميم أنيق يناسب وقت المناوبات الليلية.",
        images: [
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%201.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%202.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%20front%20.jpg?raw=true",
          "https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%20side%20.jpg?raw=true"
        ]
      }
    };

    const queryParams = new URLSearchParams(window.location.search);
    const id = queryParams.get('id');
    const product = products[id];
    let selectedSize = null;

    function selectSize(btn) {
      const group = btn.parentElement;
      group.querySelectorAll("button").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      selectedSize = btn.textContent;
    }

    function addToCart() {
      if (!selectedSize) return alert("❗ اختر المقاس");

      const productData = {
        id: id,
        name: product.title,
        price: 600,
        size: selectedSize
      };

      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      cart.push(productData);
      localStorage.setItem('cart', JSON.stringify(cart));

      const msg = document.querySelector(".successMessage");
      msg.classList.add("show");
      setTimeout(() => msg.classList.remove("show"), 2000);
    }

    function goToSlide(carouselId, index, thumb) {
      bootstrap.Carousel.getOrCreateInstance(document.getElementById(carouselId)).to(index);
      thumb.parentElement.querySelectorAll("img").forEach(img => img.classList.remove("active"));
      thumb.classList.add("active");
    }

    if (product) {
      const html = `
        <div class="col-12 col-md-8">
          <div class="card p-3 position-relative">
            <div id="carousel" class="carousel slide" data-bs-ride="carousel">
              <div class="carousel-inner">
                ${product.images.map((img, i) => `
                  <div class="carousel-item ${i === 0 ? 'active' : ''}">
                    <img src="${img}" class="d-block w-100" alt="صورة المنتج">
                  </div>`).join('')}
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
              </button>
            </div>

            <div class="thumbnails mt-2">
              ${product.images.map((img, i) => `
                <img src="${img}" onclick="goToSlide('carousel', ${i}, this)" class="${i === 0 ? 'active' : ''}" alt="صورة مصغرة">`).join('')}
            </div>

            <div class="card-body">
              <h5 class="card-title">${product.title}</h5>
              <p class="card-text">${product.description}</p>
              <p><span class="price-original">1000 جنيه</span> <span>600 جنيه</span></p>

              <label class="form-label">اختر المقاس:</label>
              <div class="btn-group mb-3">
                ${["S", "M", "L", "XL", "XXL", "XXXL"].map(size =>
                  `<button class="btn btn-outline-light btn-sm" onclick="selectSize(this)">${size}</button>`).join('')}
              </div><br>

              <button class="btn btn-success" onclick="addToCart()">إضافة للعربة</button>
              <div class="successMessage">✅ تمت الإضافة!</div>
            </div>
          </div>
        </div>
      `;
      document.getElementById('productDetails').innerHTML = html;
    } else {
      document.getElementById('productDetails').innerHTML = `<p>المنتج غير موجود.</p>`;
    }
  </script>
</body>
</html>
