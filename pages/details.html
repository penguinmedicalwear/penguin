<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø³ÙƒØ±Ø§Ù¾</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
  <style>
    body { background: #121212; color: #f1f1f1; font-family: 'Cairo', sans-serif; padding: 20px; }
    .carousel-item img { height: 300px; object-fit: cover; }
    .price-original { text-decoration: line-through; color: #bbb; margin-left: 10px; }
    .size-label { color: white; font-weight: bold; margin-bottom: 10px; display: block; }
    .size-btn { margin: 5px; }
    .successMessage {
      display: none;
      margin-top: 10px;
      color: #4caf50;
      font-weight: bold;
    }
    .successMessage.show { display: block; }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body>

  <div class="d-flex justify-content-between mb-3">
    <a href="scrubs.html" class="btn btn-secondary">â† Ø±Ø¬ÙˆØ¹</a>
    <a href="cart.html" class="btn btn-primary">ğŸ›’ Ø¹Ø±Ø¨Ø© Ø§Ù„ØªØ³ÙˆÙ‚</a>
  </div>

  <div class="container">
    <div id="detailCarousel" class="carousel slide mb-4" data-bs-ride="carousel">
      <div class="carousel-inner" id="detailSlides"></div>
      <button class="carousel-control-prev" data-bs-target="#detailCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
      </button>
      <button class="carousel-control-next" data-bs-target="#detailCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
      </button>
    </div>

    <h2 id="detailTitle"></h2>
    <p id="detailDesc"></p>
    <p><span class="price-original" id="detailOrig"></span> <span id="detailPrice"></span></p>

    <label class="size-label">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù‚Ø§Ø³:</label>
    <div id="sizeOptions">
      <button class="btn btn-outline-light size-btn" onclick="selectSize(this, 'S')">S</button>
      <button class="btn btn-outline-light size-btn" onclick="selectSize(this, 'M')">M</button>
      <button class="btn btn-outline-light size-btn" onclick="selectSize(this, 'L')">L</button>
      <button class="btn btn-outline-light size-btn" onclick="selectSize(this, 'XL')">XL</button>
      <button class="btn btn-outline-light size-btn" onclick="selectSize(this, 'XXL')">XXL</button>
      <button class="btn btn-outline-light size-btn" onclick="selectSize(this, 'XXXL')">XXXL</button>
    </div>

    <button class="btn btn-success mt-3" onclick="addToCart()">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø¹Ø±Ø¨Ø©</button>
    <div class="successMessage" id="successMessage">âœ… ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBhwUGROezGr52_kEmwdVpvHle-6u17cDY",
      authDomain: "penguin-orders.firebaseapp.com",
      projectId: "penguin-orders",
      storageBucket: "penguin-orders.appspot.com",
      messagingSenderId: "516028471159",
      appId: "1:516028471159:web:9fb63bf904651a5070f372"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const data = {
      Dubai: {
        imgs: [
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%20.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%201.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%202.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/dubai%20side%20.jpg?raw=true'
        ],
        title: 'Dubai',
        desc: 'Ø®Ø§Ù…Ø© Ø¥ÙŠØ·Ø§Ù„ÙŠØ© ÙØ§Ø®Ø±Ø©',
        orig: '1000 Ø¬Ù†ÙŠÙ‡',
        price: '600'
      },
      Aqua: {
        imgs: [
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%20.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%201.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%20front.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/Aquaman%20side.jpg?raw=true'
        ],
        title: 'Aqua man',
        desc: 'Ù„ÙˆÙ† Ù…Ù…ÙŠØ² ÙˆÙ‚Ù…Ø§Ø´ Ù…Ù‚Ø§ÙˆÙ… Ù„Ù„Ø¨Ù‡ØªØ§Ù†',
        orig: '1000 Ø¬Ù†ÙŠÙ‡',
        price: '600'
      },
      Midnight: {
        imgs: [
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%201.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%202.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%20front%20.jpg?raw=true',
          'https://github.com/penguinmedicalwear/penguin/blob/main/assets/images/midnight%20side%20.jpg?raw=true'
        ],
        title: 'Midnight',
        desc: 'ØªØµÙ…ÙŠÙ… Ø£Ù†ÙŠÙ‚ Ù„Ù„Ù…Ù†Ø§ÙˆØ¨Ø§Øª Ø§Ù„Ù„ÙŠÙ„ÙŠØ©',
        orig: '1000 Ø¬Ù†ÙŠÙ‡',
        price: '600'
      }
    };

    const urlParams = new URLSearchParams(window.location.search);
    const productName = urlParams.get('product');
    const product = data[productName];

    let selectedSize = null;

    function selectSize(btn, size) {
      document.querySelectorAll('.size-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      selectedSize = size;
    }

    function addToCart() {
      if (!selectedSize) {
        alert('â— Ø§Ø®ØªØ± Ø§Ù„Ù…Ù‚Ø§Ø³ Ø£ÙˆÙ„Ø§Ù‹');
        return;
      }

      db.collection("cart").add({
        product: product.title,
        price: parseInt(product.price),
        size: selectedSize,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        document.getElementById("successMessage").classList.add("show");
        setTimeout(() => {
          document.getElementById("successMessage").classList.remove("show");
        }, 2000);
      });
    }

    // Load product details
    if (product) {
      document.getElementById("detailTitle").textContent = product.title;
      document.getElementById("detailDesc").textContent = product.desc;
      document.getElementById("detailOrig").textContent = product.orig;
      document.getElementById("detailPrice").textContent = `${product.price} Ø¬Ù†ÙŠÙ‡`;

      const slidesContainer = document.getElementById("detailSlides");
      product.imgs.forEach((img, index) => {
        slidesContainer.innerHTML += `
          <div class="carousel-item ${index === 0 ? 'active' : ''}">
            <img src="${img}" class="d-block w-100" alt="${product.title}">
          </div>
        `;
      });
    } else {
      document.body.innerHTML = "<h3 class='text-center text-danger'>âŒ Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯</h3>";
    }
  </script>
</body>
</html>
